{% extends 'parent.html' %}
{% load static %}

{% block newcss %}
   <link rel="stylesheet" href="{% static 'css/cart.css' %}">
{% endblock %}

{% block title %}
   Shopping Cart
{% endblock %}

{% block categories %}
   <div class="container-fluid mt-5 p-4"> 
      <div class="cart">     
         <div class="row">
         {% if user.is_authenticated %}

            {% if cartitems %}
            <div class="col-8 p-0">
               <div class="items bg-body m-1 p-3 rounded">
                  <h4 class="text-center shophead">SHOPPING CART</h4> 
                  <hr>
               
                  {% for c in cartitems %}
                  <div class="row my-4">
                     <div class="col-3">
                        <div class="image-container">
                           <img src={{c.cart_image.url}} alt="cart_image" class="img-fluid" width=100 height=130>
                        </div>
                     </div>
                     <div class="col-6">
                        <p class="fw-bold">{{c.brand}}</p>
                        <p class="fw-bold">{{c.title}}</p>
                        <p>Size: {{c.size}}</p>
                        <p>Seller: {{c.seller}}</p>
                        <p>₹{{c.total_price}}
                           <span class="ms-3 text-success text-decoration-line-through fs-6">₹{{c.total_mrp}}</span>
                        </p>
                        <a href="#" class="btn btn-danger btn-sm">Save It For Later</a> 
                        <a href="{% url 'remove_cartitem' c.id %}" class="btn btn-success btn-sm">Remove</a>
                     </div>
                     <div class="col-3">  
                        <div class="btn-group btn-group-sm quantity" role="group" aria-label="quantity">
                           <a class="btn btn-outline-primary" href="{% url 'updateqty' c.id %}">
                              <i class="fa-solid fa-plus"></i></a>
                           <button type="button" class="btn btn-outline-primary border-start-0 border-end-0 fw-bolder">
                              {{c.quantity}}</button>
                           <a class="btn btn-outline-primary" href="{% url 'deleteqty' c.id %}">
                              <i class="fa-solid fa-minus"></i></a>
                        </div>                       
                     </div>
                  </div>
                  <hr>
                  {% endfor %}
                  <button type="button" class="btn btn-warning ms-auto d-block">PLACE THE ORDER</button>
               </div>
            </div>
            <div class="col-4 p-0">
               <div class="pricedetails bg-body m-1 p-3 rounded">
                  <h5 class="pricehead">Price Details</h5>
                  <hr class="hrrule">
                  <div class="row">
                     <div class="col-8">
                       <p>Price[{{cart.total_qty}} Items]</p>
                       <p>Discount</p>
                       <p>Delivery Charges</p>
                       <p><b>TOTAL AMOUNT</b></p>
                     </div>
                     <div class="col-4">
                       <p>₹{{total}}</p>
                       <p>-₹{{cart.total_dscnt}}</p>
                       <p>FREE</p>
                       <p><b>₹{{cart.total_amnt}}</b></p>
                     </div>
                  </div>  
               </div>
            </div>
            {% else %}
              <h2 class="text-center">YOUR CART IS EMPTY</h2>
            {% endif %}
         {% else %}
            <h2>Login To Add Items To Cart</h2>
            <button>Login</button>
         {% endif %}
         </div>
      </div>
   </div>
{% endblock %}